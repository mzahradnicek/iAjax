!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.iAjax=e():t.iAjax=e()}(window,function(){return function(t){var e={};function o(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=2)}([function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if("prototype"===t)return void 0===arguments[2]?r.prototype[arguments[1]]:void(r.prototype[arguments[1]]=arguments[2]);return new r(t)};var i,n=(i=o(1))&&i.__esModule?i:{default:i};var r=function(t){this.opt=Object.assign({method:"GET",async:!0,data:null,headers:null,jsonp:!1,baseUrl:"",withCredentials:!1,success:function(t,e,o){},error:function(t,e,o,i){throw"Error "+t}},this.baseOpt,t)};r.prototype={baseOpt:{},send:function(){if(!this.opt.url)throw"URL parameter for Request is not set.";var t=(-1!=this.opt.url.indexOf("//")?"":this.opt.baseUrl)+this.opt.url;if(null!==this.opt.data&&"[object Object]"==Object.prototype.toString.apply(this.opt.data)){var e=[],o=this.opt.data;for(var i in o)if(o[i]instanceof Array)for(var n in o[i])e.push(encodeURIComponent(i)+"="+encodeURIComponent(o[i][n]));else e.push(encodeURIComponent(i)+"="+encodeURIComponent(o[i]));-1!=["get","delete"].indexOf(this.opt.method.toLowerCase())?t=t+(t.indexOf("?")>-1?"&":"?")+e.join("&"):this.opt.data=e.join("&")}if(this.opt.jsonp){if("get"!=this.opt.method.toLowerCase())throw"This request cant be done!";this.sendJSONPRequest(t)}else this.sendXMLHttpRequest(t)},sendXMLHttpRequest:function(t){this.xhr=new XMLHttpRequest,this.xhr.onreadystatechange=this.xhrOnreadyStateChangeEvent;var e=[this.opt.method,t,this.opt.async];if(this.opt.user&&(e.push(this.opt.user),this.opt.password&&e.push(this.opt.password)),this.xhr.open.apply(this.xhr,e),this.opt.withCredentials&&(this.xhr.withCredentials=!0),this.opt.headers){var o=this.opt.headers;for(var i in o)this.xhr.setRequestHeader(i,o[i])}this.xhr.addEventListener("loadstart",this.xhrLoadStartEvent.bind(this)),this.xhr.addEventListener("progress",this.xhrProgressEvent.bind(this)),this.xhr.addEventListener("error",this.xhrErrorEvent.bind(this)),this.xhr.addEventListener("timeout",this.xhrTimeoutEvent.bind(this)),this.xhr.addEventListener("abort",this.xhrAbortEvent.bind(this)),this.xhr.addEventListener("load",this.xhrLoadEvent.bind(this)),this.xhr.addEventListener("loadend",this.xhrLoadEndEvent.bind(this)),this.xhr.send(null!=this.opt.data&&-1!==["post","put"].indexOf(this.opt.method.toLowerCase())?this.opt.data:null)},setConfig:function(t){return this.opt=Object.assign(this.opt,t),this},xhrOnreadyStateChangeEvent:function(){},xhrLoadStartEvent:function(t){this.opt.loadStart&&this.opt.loadStart(t,this.xhr)},xhrProgressEvent:function(t){this.opt.progress&&(t.lengthComputable?this.opt.progress(t.loaded,t.total,t,this.xhr):this.opt.progress(!1,t.total,t,this.xhr))},xhrErrorEvent:function(t){this.opt.error("error",t,this.xhr)},xhrTimeoutEvent:function(t){this.opt.error("timeout",t,this.xhr)},xhrAbortEvent:function(t){this.opt.abort&&this.opt.abort(t,this.xhr)},xhrLoadEvent:function(t){var e=(0,n.default)(this.xhr);this.opt.load&&this.opt.load(t,this.xhr,e),this.beforeProcessRequest(this.xhr)&&(this.xhr.status<400?this.opt.success(e,t,this.xhr):this.opt.error("http",t,this.xhr,e))},xhrLoadEndEvent:function(t){this.opt.loadEnd&&this.opt.loadEnd(t,this.xhr)},beforeProcessRequest:function(t){return!0},sendJSONPRequest:function(t){this.opt.callbackName||(this.opt.callbackName="callback_"+Math.round(1e5*Math.random())),this.opt.timeout||(this.opt.timeout=1e4),t=t+(t.indexOf("?")>-1?"&":"?")+"callback="+this.opt.callbackName;var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=t;var o=window.setTimeout(function(){this.opt.error("timeout"),i.apply(this)}.bind(this),this.opt.timeout),i=function(){window.clearTimeout(o),e.parentNode.removeChild(e),delete window[this.opt.callbackName]};window[this.opt.callbackName]=function(t){this.opt.success(t),i.apply(this)}.bind(this),e.addEventListener("error",function(t){this.opt.error("error",t),i.apply(this)}.bind(this)),(document.getElementsByTagName("head")[0]||document.body).appendChild(e)}},t.exports=e.default},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if("string"==typeof t&&"addParser"==t)return void(i[arguments[1]]=arguments[2]);var e=t.getResponseHeader("Content-Type");e&&(e=e.split(";")[0]);for(var o in i){var n=o.split(",");if(n.indexOf(e)>-1)return i[o](t.responseText)}return t.responseText};var i={"application/json,text/json":function(t){return JSON.parse(t)},"application/xml,text/xml":function(t){return(new DOMParser).parseFromString(t,"text/xml")}};t.exports=e.default},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(o(0)),n=a(o(3)),r=a(o(4)),s=a(o(1));function a(t){return t&&t.__esModule?t:{default:t}}o(5);var h={request:i.default,responseParser:s.default,form:n.default};["get","post","put","delete"].forEach(function(t){h[t]=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(t),r.default.apply(null,e)}});var u=h;e.default=u,t.exports=e.default},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if("string"==typeof t&&(!(e.formEl=document.querySelector(t))||"FORM"!=e.formEl.tagName))throw"Form element not found or it is not a FORM!";if("object"==r(t))if(t instanceof Node){if("FORM"!=t.tagName)throw"Element is not FORM node.";e.formEl=t}else var o=t;var i=new s(e,o);e.formEl&&e.formEl.addEventListener("submit",function(t){t.preventDefault(),i.submit()});return i};var i,n=(i=o(0))&&i.__esModule?i:{default:i};function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s=function(t,e){if(this.opt=Object.assign({formEl:null,method:"post",batch:!1,success:function(t,e,o,i){},error:function(t,e,o,i,n){throw"Error "+t}},t),this.fieldsStatic=[],this.fields=[],this.hasFiles=!1,this.batchBytesLoaded=0,this.batchBytesTotal=0,this._submitting=!1,e)for(var o in e)this.fieldsStatic.push([o,e[o]])};s.prototype={submit:function(){var t={};if(this.fields=this.fieldsStatic.slice(),this._submitting=!0,this.opt.formEl&&(this.serializeFormData(this.opt.formEl),this.opt.method=this.opt.formEl.method),t.method=this.opt.method,this.opt.url)t.url=this.opt.url;else{if(null===this.opt.formEl)throw"URL is not set";t.url=this.opt.formEl.action}!this.opt.beforeSend||this.opt.beforeSend.call(this)?this.hasFiles&&this.opt.batch?this.runBatch(t):(t.loadStart=this.frmLoadStartEvent(this),t.progress=this.frmProgressEvent(this),t.error=this.frmErrorEvent(this),t.abort=this.frmAbortEvent(this),t.load=this.frmLoadEvent(this),t.loadEnd=this.frmLoadEndEvent(this),t.success=this.frmSuccessEvent(this),-1!=["post","put"].indexOf(this.opt.method)?this.hasFiles?t.data=this.mkFormData(this.fields):(t.data=this.makeQS(this.fields),t.headers={"Content-Type":"application/x-www-form-urlencoded"}):this.fields&&(t.url+="?"+this.makeQS(this.fields)),(0,n.default)(t).send()):this._submitting=!1},mkFormData:function(t){for(var e=new FormData,o=0;t.length>o;o++)e.append.apply(e,t[o]);return e},runBatch:function(t){var e,o,i,r,s,a,h=[],u=[];this.batchBytesTotal=0,this.batchBytesLoaded=0;for(var f=0;this.fields.length>f;f++)3==this.fields[f].length?(h.push(this.fields[f]),this.batchBytesTotal+=this.fields[f][1].size):u.push(this.fields[f]);!1!==this.batchStartEvent(h,u,this.batchBytesTotal)?(e=h.length,o=function(e){var o=u.concat([]),i=e.iteration();o.push(h[i]),t.data=this.mkFormData(o),t.loadStart=this.frmLoadStartEvent(this,i),t.progress=this.frmProgressEvent(this,i),t.error=this.frmErrorEvent(this,i),t.abort=this.frmAbortEvent(this,i),t.load=this.frmLoadEvent(this,i),t.success=this.frmSuccessEvent(this,i),t.loadEnd=function(){!1!==this.frmLoadEndEvent(this,i).apply(this,arguments)&&e.next()}.bind(this),(0,n.default)(t).send()}.bind(this),i=function(){this.batchDoneEvent()}.bind(this),r=0,s=!1,(a={next:function(){s||(r<e?(r++,o(a)):(s=!0,i()))},iteration:function(){return r-1},break:function(){s=!0,i()}}).next()):this._submitting=!1},frmLoadStartEvent:function(t,e){return function(o,i){t.opt.loadStart&&t.opt.loadStart(t,o,i,e)}},frmProgressEvent:function(t,e){return function(o,i,n,r){t.opt.progress&&t.opt.progress(o,i,t,n,r,e)}},frmErrorEvent:function(t,e){return function(o,i,n,r){t.opt.error(o,t,i,n,r,e)}},frmAbortEvent:function(t,e){return function(o,i){t.opt.abort&&t.opt.abort(t,o,i,e)}},frmLoadEvent:function(t,e){return function(o,i,n){t.opt.load&&t.opt.load(t,o,i,n,e)}},frmSuccessEvent:function(t,e){return function(o,i,n){t.opt.success(o,t,i,n,e)}},frmLoadEndEvent:function(t,e){return function(o,i){if(t.opt.loadEnd)return t.opt.loadEnd(t,o,i,e)}},batchStartEvent:function(){return!this.opt.batchStart||this.opt.batchStart.apply(this,arguments)},batchDoneEvent:function(){if(this.opt.batchDone)return this.opt.batchDone.apply(this,arguments)},append:function(){"object"==r(arguments[1])&&(this.hasFiles=!0),this["fields"+(this._submitting?"":"Static")].push(arguments)},set:function(t,e){for(var o="fields"+(this._submitting?"":"Static"),i=0,n=this[o].length;i<n;i++)if(this[o][i][0]==t)return void(this[o][i]=arguments);this[o].push(arguments)},delete:function(t,e){for(var o="fields"+(this._submitting?"":"Static"),i=0,n=this[o].length;i<n;i++)this[o][i][0]!=t||e&&this[o][i][1]!=e||this[o].splice(i,1);return!0},get:function(t){for(var e="fields"+(this._submitting?"":"Static"),o=0,i=this[e].length;o<i;o++)if(this[e][o][0]==t)return this[e][o][1]},getAll:function(t){for(var e=[],o="fields"+(this._submitting?"":"Static"),i=0,n=this[o].length;i<n;i++)this[o][i][0]==t&&e.push(this[o][i][1]);return e},has:function(t){for(var e="fields"+(this._submitting?"":"Static"),o=0,i=this.fieds.length;o<i;o++)if(this[e][o][0]==t)return!0;return!1},serializeFormData:function(t){if(!t||"FORM"!==t.tagName)throw"Element is not form";var e,o;for(e=t.elements.length-1;e>=0;e--)if(""!=(o=t.elements[e]).name)switch(o.nodeName){case"INPUT":switch(o.type){case"file":if(-1==["post","put"].indexOf(t.method))throw"You cant send files with GET method.";if(0==o.files.length)continue;for(var i=0;i<o.files.length;i++)this.append(o.name,o.files[i],o.files[i].name);break;case"checkbox":case"radio":if(!o.checked)continue;default:this.append(o.name,o.value)}break;case"TEXTAREA":this.append(o.name,o.value);break;case"SELECT":if("select-one"==o.type){this.append(o.name,o.value);break}for(j=o.options.length-1;j>=0;j-=1)o.options[j].selected&&this.append(o.name,o.options[j].value)}},makeQS:function(t){for(var e=[],o=0;t.length>o;o++)if(t[o][1]instanceof Array)for(var i in t[o][1])e.push(t[o][0]+"="+encodeURIComponent(t[o][1][i]));else e.push(t[o][0]+"="+encodeURIComponent(t[o][1]));return e.join("&")}},t.exports=e.default},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(-1==["get","post","put","delete"].indexOf(t.toLowerCase()))throw"Method "+t+" not supported";if("string"!=typeof e)throw"URL must be string";var o=Array.prototype.slice.call(arguments),i={method:o.shift(),url:o.shift()};o.length>0&&"object"==r(o[0])&&(i.data=o.shift());o.length>0&&"function"==typeof o[0]&&(i.success=o.shift());o.length>0&&"function"==typeof o[0]&&(i.error=o.shift());o.length>0&&"string"==typeof o[0]&&(i.format=o.shift());var s=(0,n.default)(i);return s.send(),s};var i,n=(i=o(0))&&i.__esModule?i:{default:i};function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=e.default},function(t,e){"function"!=typeof Object.assign&&(Object.assign=function(t){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),o=1;o<arguments.length;o++){var i=arguments[o];if(null!=i)for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])}return e})}])});